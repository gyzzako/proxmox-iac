# proxmox-iac
IaC for homelab proxmox hypervisor


## SSH prerequisites
Host machine that runs terraform needs SSH keys. Update in *manager-lxc.tf* accordingly.
The public key will be uploaded to the manager LXC. That will allow terraform to upload the a private key generated by terraform to SSH into the other LXC.

## Required variables
### credentials
credentials.auto.tfvars
```
PROXMOX_URL = ""
USER        = ""
PASSWORD    = ""
```

### lxc config example
lxc.auto.tfvars.json
```
{
    "ostemplate": "local:vztmpl/ubuntu-24.04-standard_24.04-2_amd64.tar.zst",
    "root_password": "",
    "lxcs": [
        {
            "hostname": "test",
            "vmid": 111,
            "cores": 2,
            "memory": 2048,
            "swap": 512,
            "disk_size": "8G",
            "cidr": "192.168.129.111/23",
            "gateway": "192.168.128.1",
            "mountpoints": [
                { "slot": 0, "volume": "/mnt/pve/NAS/", "mp": "/mnt/nas/", "backup": false }
            ],
            "unprivileged": true
        }
    ]
}
```